[build]
  command = "npm run build"
  publish = "dist"

[context.production.environment]
  VITE_API_BASE_URL = "/api-proxy"

[dev]
  command = "npm run dev"

# ✅ Proxy API requests to backend (fixes mixed content HTTP -> HTTPS issue)
[[redirects]]
  from = "/api-proxy/*"
  to = "http://3.109.212.23:5000/:splat"
  status = 200
  force = true

# ✅ Redirect all SPA routes, but NOT JS/CSS assets
[[redirects]]
  from = "/assets/*"
  to = "/assets/:splat"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
